/** @define c-main-menu */
.c-main-menu {
  $c        : &;
  display   : flex;
  flex-wrap : wrap;
  gap       : var(--space-m);

  @include media("<desktop") {
    flex-direction : column;
    gap            : 0;
  }

  &__item {
    font-size : 0;

    @include media("<desktop") {
      border-top   : 1px solid $grey-light;
      padding-left : var(--gutter);
    }

    &:hover {
      @include media(">desktop") {
        .c-mega-nav {
          //display : block !important; // Important to override JS show/hide
          display : block;
        }

        #{$c}__button-svg {
          transform : rotate(180deg);
        }
      }
    }

    @include media(">desktop") {
      &:hover,
      &:focus {
        > #{$c}__item-link-wrapper > #{$c}__item-link {
          text-decoration-color : $white;
        }

        //#{$c}__sub-menu {
        //  display : block;
        //}
        //
        //#{$c}__sub-menu-svg {
        //  transform : rotateX(180deg);
        //}
      }
    }

    &--expanded {
      #{$c}__item-link {
        position : relative;

        &:before {
          background : transparent;
          content    : "";
          height     : 17px;
          position   : absolute;
          top        : 100%;
          width      : 100%;
        }

        @include media("<=desktop") {
          &:before {
            content : none;
          }

          //&:after {
          //  background : $grey-light;
          //  content    : "";
          //  height     : calc(100% - 4px);
          //  right      : -1px;
          //  position   : absolute;
          //  top        : 2px;
          //  width      : 1px;
          //}
        }
      }
    }

    &--active-trail {
      #{$c}__item-link {
        text-decoration-color : $white;
      }
    }
  }

  &__item-link-wrapper {
    @include media("<=desktop") {
      align-items     : center;
      display         : flex;
      justify-content : space-between;
    }
  }

  &__item-link {
    @include ts-main-menu;
    @include underlined($white);

    @include media("<desktop") {
      padding : 8px 8px 8px 0;
      width   : 100%;
    }

    /* stylelint-disable-next-line */
    &.is-active {
      text-decoration-color : $white;
    }
  }

  //&__sub-menu {
  //  display : none;
  //}
  //
  &__sub-menu-button {
    display : none;

    @include media("<=desktop") {
      display     : flex;
      flex-shrink : 0;
      transition  : all 0.3s;
      padding     : 18px var(--gutter);
      position    : relative;

      &:not(.is-clicked) {
        #{$c}__sub-menu-svg {
          transform : rotateX(0);
        }
      }

      &:hover,
      &:focus {

        #{$c}__sub-menu-svg {
          opacity : 0.7;
        }
      }

      &:before {
        background : $grey-light;
        content    : "";
        height     : calc(100% - 4px);
        left       : 0;
        position   : absolute;
        top        : 2px;
        width      : 1px;
      }
    }

    &.is-clicked {
      /* stylelint-disable-next-line */
      #{$c}__sub-menu-svg {
        transform : rotateX(180deg);
      }

      &:before {
        content : none;
      }
    }
  }
}
